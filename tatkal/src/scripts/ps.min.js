(function() {
    function k(a) {
        if (a && b && (a = a[h + f])) {
            if ("NETBANKING" == a.paymentType) {
                for (var e = $(".NETBANKING input"), c = 0; c < e.length; ++c) {
                    var d = e[c];
                    if (d && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                }
                document.getElementById("NETBANKING").click()
            } else if ("CREDIT_CARD" == a.paymentType) {
                e = $(".CREDIT_CARD input");
                for (c = 0; c < e.length; ++c)
                    if ((d = e[c]) && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                document.getElementById("CREDIT_CARD").click()
            } else if ("DEBIT_CARD" ==
                a.paymentType) {
                e = $(".DEBIT_CARD input");
                for (c = 0; c < e.length; ++c)
                    if ((d = e[c]) && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                document.getElementById("DEBIT_CARD").click()
            } else if ("CASH_CARD" == a.paymentType) {
                e = $(".CASH_CARD input");
                for (c = 0; c < e.length; ++c)
                    if ((d = e[c]) && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                document.getElementById("CASH_CARD").click()
            } else if ("EMI" == a.paymentType) {
                e = $(".EMI input");
                for (c = 0; c < e.length; ++c)
                    if ((d = e[c]) && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                document.getElementById("EMI").click()
            } else if ("IRCTC_PREPAID" == a.paymentType) {
                e = $(".IRCTC_PREPAID input");
                for (c = 0; c < e.length; ++c)
                    if ((d = e[c]) && d.value == a.paymentGateway) {
                        $("input[value=" + d.value + "]").attr("checked", "checked").change();
                        break
                    }
                document.getElementById("IRCTC_PREPAID").click()
            }
            "CREDIT_CARD" == a.paymentType || "IRCTC_PREPAID" == a.paymentType || "EMI" == a.paymentType ?
                27 != a.paymentGateway && 30 != a.paymentGateway && 58 != a.paymentGateway ? chrome.storage.local.get(i + f, l) : a.paymentGateway && b && (b.validate && "" != b.validate.value) && b.validate.click() : a.paymentGateway && b && (b.validate && "" != b.validate.value) && b.validate.click();
            window.scrollTo(0, document.body.scrollHeight)
        }
    }

    function l(a) {
        if (a && (a = a[i + f]))
            if (b.card_type_id && (b.card_type_id.value = a.type), b.card_no_id && (b.card_no_id.value = a.number), b.card_expiry_mon_id && (b.card_expiry_mon_id.value = a.expiryMonth), b.card_expiry_year_id &&
                (b.card_expiry_year_id.value = a.expiryYear), b.cvv_no_id && (b.cvv_no_id.value = a.cvvNum), b.card_name_id && (b.card_name_id.value = a.cardName), b.captcha_txt) b.captcha_txt.style.border = "1px solid red", b.captcha_txt.focus(), b.validate && b.validate.addEventListener("click", m), b.captcha_txt.addEventListener("blur", function() {
                setTimeout(n, 300)
            })
    }

    function m() {
        g = !0
    }

    function n() {
        g || b && (b.validate && "" != b.captcha_txt.value) && b.validate.click();
        g = !1
    }
    var j = !0,
        b = document.forms.jpBook,
        f = void 0,
        h = "paymentDetails_",
        i = "cardDetails_",
        g = !1;
    chrome.storage.local.get("irctcZapTatkalEnable", function(a) {
        a && (j = a.irctcZapTatkalEnable);
        j && chrome.storage.local.get("selectedForm", function(a) {
            a && (f = a.selectedForm, chrome.storage.local.get(h + f, k))
        })
    })
})();