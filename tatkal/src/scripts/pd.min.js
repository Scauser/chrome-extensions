(function() {
	function o(c) {
		if (c && (c = c[j + h]) && a) {
			var b = 0 < c.boardingStation.length ? c.boardingStation.substring(c.boardingStation.indexOf(" - ") + 3).trim() : "";
			0 == b.length && (b = 0 < c.fromStation.length ? c.fromStation.substring(c.fromStation.indexOf(" - ") + 3).trim() : "");
			a["addPassengerForm:boardingStation"] && $("select[name='addPassengerForm:boardingStation'] option").each(function() {
				$(this).val().toLowerCase() == b.toLowerCase() && (a["addPassengerForm:boardingStation"].value = b)
			})
		}
	}

	function p(c) {
		if (a && (c = c[k + h])) {
			var b =
				document.createEvent("HTMLEvents");
			b.initEvent("change", !1, !0);
			for (var g = !0, e = 0; e < c.length; ++e) {
				var f = c[e];
				if (0 == e && (!f.name || !f.age || !f.gender)) g = !1;
				var d = $('tr[id="addPassengerForm:psdetail:' + e + '"]');
				a["addPassengerForm:psdetail:" + e + ":psgnName"] ? a["addPassengerForm:psdetail:" + e + ":psgnName"].value = f.age || "" : 0 < $(d).find("input.psgn-name").length && $(d).find("input.psgn-name").val(f.name || "");
				a["addPassengerForm:psdetail:" + e + ":psgnAge"] ? (a["addPassengerForm:psdetail:" + e + ":psgnAge"].value = f.age || "",
						a["addPassengerForm:psdetail:" + e + ":psgnAge"].dispatchEvent(b)) : 0 < $(d).find("input.psgn-age").length && ($(d).find("input.psgn-age").val(f.age || ""), $(d).find("input.psgn-age")[0].dispatchEvent(b));
				a["addPassengerForm:psdetail:" + e + ":psgnGender"] ? (a["addPassengerForm:psdetail:" + e + ":psgnGender"].value = f.gender, a["addPassengerForm:psdetail:" + e + ":psgnGender"].dispatchEvent(b)) : 0 < $(d).find("select.psgn-gender").length && ($(d).find("select.psgn-gender").val(f.gender), $(d).find("select.psgn-gender")[0].dispatchEvent(b));
				a["addPassengerForm:psdetail:" + e + ":foodChoice"] ? a["addPassengerForm:psdetail:" + e + ":foodChoice"].value = f.mealPref : 0 < $("select[name='addPassengerForm:psdetail:" + e + ":foodChoice']").length && $("select[name='addPassengerForm:psdetail:" + e + ":foodChoice']").val(f.mealPref);
				a["addPassengerForm:psdetail:" + e + ":berthChoice"] ? a["addPassengerForm:psdetail:" + e + ":berthChoice"].value = f.berthChoice : 0 < $(d).find("select.psgn-berth-choice").length && $(d).find("select.psgn-berth-choice").val(f.berthChoice);
				a["addPassengerForm:psdetail:" +
				  e + ":aadhaarCardNumber"] ? (a["addPassengerForm:psdetail:" + e + ":aadhaarCardNumber"].value = f.aadhaarCardNumber || "", a["addPassengerForm:psdetail:" + e + ":aadhaarCardNumber"].dispatchEvent(b)) : 0 < $(d).find("input.psgn-aadhaarcardnumber").length && ($(d).find("input.psgn-aadhaarcardnumber").val(f.aadhaarCardNumber || ""), $(d).find("input.psgn-aadhaarcardnumber")[0].dispatchEvent(b));
				  a["addPassengerForm:psdetail:" + e + ":concessionOpt"] && a["addPassengerForm:psdetail:" + e + ":concessionOpt"].checked != f.optConcession ? (a["addPassengerForm:psdetail:" +
				                                                                                                                                                   e + ":concessionOpt"].checked = f.optConcession, a["addPassengerForm:psdetail:" + e + ":concessionOpt"].dispatchEvent(b)) : 0 < $(d).find("input.psgn-concopt").length && ($(d).find("input.psgn-concopt").prop("checked", f.optConcession), $(d).find("input.psgn-concopt")[0].dispatchEvent(b));
				  0 < $(d).find("select.psgn-disablePsgnType").length && ($(d).find("select.psgn-disablePsgnType").val(f.concessionType), $(d).find("select.psgn-disablePsgnType")[0].dispatchEvent(b));
				  0 < $(d).find("input.psgn-disableCardId").length && ($(d).find("input.psgn-disableCardId").val(f.handicapCardNo ||
				  ""), $(d).find("input.psgn-disableCardId")[0].dispatchEvent(b));
				  0 < $(d).find("input.psgn-disablePsgnDob").length && ($(d).find("input.psgn-disablePsgnDob").val(f.DoB || ""), $(d).find("input.psgn-disablePsgnDob")[0].dispatchEvent(b));
				  0 < $(d).find("input.psgn-disableCardExpDt").length && ($(d).find("input.psgn-disableCardExpDt").val(f.validUpto || ""), $(d).find("input.psgn-disableCardExpDt")[0].dispatchEvent(b))
			}
			a.j_captcha && g && (a.j_captcha.style.border = "1px solid red", a.j_captcha.focus(), a.j_captcha.addEventListener("blur",
					function() {
				setTimeout(q, 300)
			}), a.validate && a.validate.addEventListener("click", r))
		}
	}

	function r() {
		i = !0
	}

	function q() {
		i || a && (a.validate && "" != a.j_captcha.value) && a.validate.click();
		i = !1
	}

	function s(c) {
		if (a && (c = c[l + h]))
			for (var b = 0; b < c.length; ++b) {
				var g = c[b];
				a["addPassengerForm:childInfoTable:" + b + ":infantName"] && (a["addPassengerForm:childInfoTable:" + b + ":infantName"].value = g.infantName || "");
				a["addPassengerForm:childInfoTable:" + b + ":infantAge"] && (a["addPassengerForm:childInfoTable:" + b + ":infantAge"].value = g.infantAge);
				a["addPassengerForm:childInfoTable:" + b + ":infantGender"] && (a["addPassengerForm:childInfoTable:" + b + ":infantGender"].value = g.infantGender)
			}
	}

	function t(c) {
		if (a && (c = c[m + h])) {
			a["addPassengerForm:mobileNo"] && (a["addPassengerForm:mobileNo"].value = c.mobileNumber);
			a["addPassengerForm:autoUpgrade"] && (a["addPassengerForm:autoUpgrade"].checked = c.autoUpgrade);
			a["addPassengerForm:onlyConfirmBerths"] && (a["addPassengerForm:onlyConfirmBerths"].checked = c.onlyConfirmBerths);
			a["addPassengerForm:prefCoachOpt"] && c.prefCoachOpt &&
			a["addPassengerForm:prefCoachOpt"].click();
			a["addPassengerForm:coachID"] && (a["addPassengerForm:coachID"].value = c.coachID);
			for (var b = 0; 4 > b; ++b) {
				var g = a["addPassengerForm:bookingCond:" + b];
				g && (g.checked = g.value == c.bookingCond ? "checked" : !1)
			}
		}
	}
	var n = !0,
	a = document.forms.addPassengerForm,
	h = void 0,
	k = "passengerDetails_",
	l = "childPassengerDetails_",
	m = "additionalDetails_",
	j = "jpDetails_",
	i = !1;
	chrome.storage.local.get("irctcZapTatkalEnable", function(a) {
		a && (n = a.irctcZapTatkalEnable);
		n && chrome.storage.local.get("selectedForm",
				function(a) {
			a && (h = a.selectedForm, chrome.storage.local.get(k + h, p), chrome.storage.local.get(j + h, o), chrome.storage.local.get(l + h, s), chrome.storage.local.get(m + h, t))
		})
	})
})();